language: cpp

compiler: gcc

before_install:
    - sudo apt-get -qq update
    - sudo apt-get install -y build-essential autoconf libtool libpng12-dev libfreetype6-dev

addons:
    apt:
        sources:
            - libsdl2-dev
            - libsdl2-mixer-dev

script:
    - autoreconf -i
    - CPPFLAGS="-I/usr/include/freetype2" ./configure --enable-map-editor --enable-non-free-pak
    - make -j`nproc`
    - make clean
    - CPPFLAGS="-I/usr/include/freetype2" ./configure --enable-dedicated-server
    - make -j`nproc`
